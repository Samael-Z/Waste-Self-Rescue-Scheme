+ `shift + f12` 加条件断点

  ![image-20201119223255927](https://i.loli.net/2020/11/19/BpDXI2L5QtrxGJR.png)

+ `ctrl + G` 断到特定API

+ `ctrl + f8` 自动步过

+ IDA加参数支持中文

+ 用字符数组可以让IDA和OD都搜不到字符串

  ```c
  char a[] = {0xxx, ... };
  ```

  

  ![image-20210225094441374](https://cdn.jsdelivr.net/gh/smallzhong/picgo-pic-bed/image-20210225094441374.png)

+ 如果在判断的时候新启动了一个线程

  ![image-20210225095947924](https://cdn.jsdelivr.net/gh/smallzhong/picgo-pic-bed/image-20210225095947924.png)

  这样可以找到

  ![image-20210225100004042](https://cdn.jsdelivr.net/gh/smallzhong/picgo-pic-bed/image-20210225100004042.png)

  选择不是红色的，定位到那里，就是关键的位置

+ `local.1` 表示局部变量1

  ![image-20210225101657770](https://cdn.jsdelivr.net/gh/smallzhong/picgo-pic-bed/image-20210225101657770.png)

+ 如果想用vs调试dll，可以这样设置

  ![image-20210307212814384](https://cdn.jsdelivr.net/gh/smallzhong/picgo-pic-bed/image-20210307212814384.png)

+ 如果要通过dll劫持达到目的，而目标exe有壳，那么可以通过

  ```cpp
  while (1)
  {
  	// 判断某个位置的特征码
  	ReadProcessMemory(-1, , ,); // 当然这里可以直接用指针
  }
  ```

  来达到目的，只有解壳完毕之后才跳出循环，执行我们的patch操作。

+ 想要获取线程context可以使用 `GetThreadContext` API。

+ `AddVectoredExceptionHandler` 可以注册一个VEH链

+ 调试器下断就是给第一个字节patch为int3

  ![image-20210325205023217](https://cdn.jsdelivr.net/gh/smallzhong/new-picgo-pic-bed@master/image-20210325205023217.png)

+ VS也可以修改字符集

  ![image-20210325210507857](https://cdn.jsdelivr.net/gh/smallzhong/new-picgo-pic-bed@master/image-20210325210507857.png)

+ 如果代码节有CRC校验，可以下硬断。想检查是否有类似的代码校验，一个思路是看线程，看哪个线程跑得最欢，然后挂起这个线程。可能就能达到防CRC校验的目的。

+ 易语言里面判断字符串相等可以找 `test edx, 3` 

+ 硬件断点重启不消失，在CPU里面

+ ![image-20210326191214496](https://cdn.jsdelivr.net/gh/smallzhong/new-picgo-pic-bed@master/image-20210326191214496.png)

  这个插件有bug，加了硬断之后要重启才能断下来。

+ 如果程序有crc代码校验的话，还有一种思路是hook掉退出函数，如果代码校验线程使用 `exit(0)` 来退出的话直接hook掉不让其退出，应该也是一种方法。

+ ![image-20210326191926426](https://cdn.jsdelivr.net/gh/smallzhong/new-picgo-pic-bed@master/image-20210326191926426.png)

+ ![image-20210326192509315](https://cdn.jsdelivr.net/gh/smallzhong/new-picgo-pic-bed@master/image-20210326192509315.png)

  可以通过 `GetThreadContext` 获取线程上下文之后修改 `Dr` 寄存器，然后通过 `SetThreadContext` 令其生效，这样设置硬件断点。

