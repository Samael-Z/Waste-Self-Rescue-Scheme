![image-20200901105721775](https://cdn.jsdelivr.net/gh/smallzhong/picgo-pic-bed@master/image-20200901105721775.png)

+ 根据传送信息的不同，总线从逻辑上又分为3类，地址总线，控制总线和数据总线

+ 8086有 **20** 位地址总线，可以寻址 **1MB** 。

+ 对于8086PC机，在任意时刻，设 `CS` 中的内容为 **N** ， `IP` 中的内容为 **N** ，该8086CPU将从内存地址 **M * 16 + N** 单元开始读取一条指令并执行。

+ 如果想同时修改 `CS、IP` 的内容，可以用 `JMP 段地址：偏移地址` 的指令完成。如

  ```asm
  JMP 2AE3:3
  ```

+ 如果想仅修改 `IP` 的内容，可以使用 `JMP 某一合法寄存器` 来实现。如

  ```asm
  JMP AX ;将IP中的值设置为AX中的值，相当于 `MOV IP, AX`
  ```



## debug使用

+ `R` 可以查看寄存器的值

+ `R 寄存器` 可以修改寄存器的值

+ `d` 完再 `d` 一次可以再查看后面128（0x80）个单位的内存的值

+ 在 `d CS:IP` 后面跟上一个数字，这个数字表示 **结束的地址而不是展示字节的多少！** 。如 `d 1000:0 9`

  ![image-20200906211224632](https://cdn.jsdelivr.net/gh/smallzhong/picgo-pic-bed@master/image-20200906211224632.png)

+ `e` 可以改变内存中的值， `e 起始地址 数据 数据 数据`

  ![](https://cdn.jsdelivr.net/gh/smallzhong/picgo-pic-bed@master/image-20200906211600374.png)

+ ![image-20200906223936395](https://cdn.jsdelivr.net/gh/smallzhong/picgo-pic-bed@master/image-20200906223936395.png)

+ `t` 执行一行语句
+ `r` 查看寄存器，`r 某个寄存器` 可以修改这个寄存器的值
+ `e` 改写内存中内容
+ `d` 查看内存中内容，如果需要以段寄存器中的数据作为段地址来查看，也可以，如 `d DS:0`
+ `u` 查看内存中命令（汇编指令）
+ `a` 改写内存中内容（以汇编指令模式写入）



## other

+ 8086CPU不支持将数据直接送入寄存器的操作， `mov ds, 1000H` 这条指令是非法的。想要将 `1000H` 送入DS，需要使用一个寄存器进行中转，先将 `1000H` 送入一个一般的寄存器，再将这个寄存器中的内容送入DS

+ 8086的入栈和出栈操作都是以 **字** 为单位进行的

+ 栈的段寄存器是 `ss` ，栈顶是 `ss:sp` ，栈底是 `ss:bp`

+ 压栈的时候，栈顶从 **高地址向低地址方向** 增长

+ 栈空的时候 `SS:SP` 指向栈空间最高地址单元的下一个单元，如果把 `10000H-1000FH` 这段空间当作栈，初始状态栈是空的的时候 `SS:SP` = `1000:0010`

  ![image-20200913174004956](https://cdn.jsdelivr.net/gh/smallzhong/picgo-pic-bed@master/image-20200913174004956.png)

+  用 `xor ax, ax` 或者 `sub ax, ax` 而不是 `mov ax, 0` 来将 `ax` 清零的主要原因是前两个（在32位下）的机器码是3个字节，而 `mov ax,0` 的机器码是4个字节。

  ![image-20200913175029069](https://cdn.jsdelivr.net/gh/smallzhong/picgo-pic-bed@master/image-20200913175029069.png)

+ 执行 `push` 时，CPU要进行两步操作：先改变 `SP` ，后向 `SS:SP` 处传送。执行 `POP` 时，CPU先读取 `SS:SP` 处的数据，然后改变 `sp` 。

+ 一个栈段最大64K（在8086CPU环境下），因为栈顶的变化范围是 `0-FFFFH` 。如果一直压栈的话栈顶将环绕，覆盖原来栈中的内容

+ 数据段 `DS` ，代码段 `CS` ，栈段 `SS` 。

  ![image-20200913182226722](https://cdn.jsdelivr.net/gh/smallzhong/picgo-pic-bed@master/image-20200913182226722.png)

